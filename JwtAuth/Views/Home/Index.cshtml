@{
    ViewData["Title"] = "Trang Chủ";
}

@if (User.Identity?.IsAuthenticated == true)
{
    <div class="hero-section text-center py-5 bg-light rounded-3 mb-5">
        <div class="container">
            <h1 class="display-4 fw-bold text-primary">Chào mừng trở lại, @User.Identity.Name!</h1>
            <p class="lead">Bạn đã đăng nhập vào hệ thống xác thực JWT</p>

            @if (ViewBag.IsAdmin)
            {
                <span class="badge bg-danger mb-3">
                    <i class="fas fa-shield-alt me-1"></i> Quản trị viên
                </span>
            }

            <div class="mt-4">
                <a asp-controller="Home" asp-action="Dashboard" class="btn btn-primary btn-lg me-3">
                    <i class="fas fa-tachometer-alt me-2"></i>Đi đến Bảng điều khiển
                </a>
                <a asp-controller="Auth" asp-action="Info" class="btn btn-outline-secondary btn-lg">
                    <i class="fas fa-user me-2"></i>Xem hồ sơ
                </a>
            </div>
        </div>
    </div>

    <div class="row g-4">
        <div class="col-md-4">
            <div class="card h-100">
                <div class="card-body text-center">
                    <i class="fas fa-shield-alt fa-3x text-primary mb-3"></i>
                    <h5>Kiểm tra xác thực</h5>
                    <p>Kiểm tra xem xác thực JWT có hoạt động đúng không.</p>
                    <a asp-controller="Auth" asp-action="TestAuth" class="btn btn-outline-primary">
                        <i class="fas fa-lock me-1"></i> Kiểm tra ngay
                    </a>
                </div>
            </div>
        </div>

        @if (ViewBag.IsAdmin)
        {
            <div class="col-md-4">
                <div class="card h-100 border-warning">
                    <div class="card-body text-center">
                        <i class="fas fa-user-shield fa-3x text-warning mb-3"></i>
                        <h5>Trang quản trị</h5>
                        <p>Truy cập các chức năng quản trị và quản lý người dùng.</p>
                        <a asp-controller="Auth" asp-action="AdminOnly" class="btn btn-warning">
                            <i class="fas fa-cog me-1"></i> Khu vực quản trị
                        </a>
                    </div>
                </div>
            </div>
        }

        <div class="col-md-4">
            <div class="card h-100">
                <div class="card-body text-center">
                    <i class="fas fa-info-circle fa-3x text-info mb-3"></i>
                    <h5>Giới thiệu</h5>
                    <p>Tìm hiểu thêm về xác thực JWT trong ASP.NET Core.</p>
                    <a href="#" class="btn btn-outline-info" data-bs-toggle="modal" data-bs-target="#aboutModal">
                        <i class="fas fa-info-circle me-1"></i> Tìm hiểu thêm
                    </a>
                </div>
            </div>
        </div>
    </div>
}
else
{
    <div class="hero-section text-center py-5 bg-light rounded-3 mb-5">
        <div class="container">
            <h1 class="display-4 fw-bold text-primary">Hệ thống xác thực JWT</h1>
            <p class="lead">Hệ thống xác thực an toàn sử dụng JSON Web Token (JWT) trong ASP.NET Core</p>

            <div class="mt-4">
                <a asp-controller="Auth" asp-action="Login" class="btn btn-primary btn-lg me-3">
                    <i class="fas fa-sign-in-alt me-2"></i>Đăng nhập
                </a>
                <a asp-controller="Auth" asp-action="Register" class="btn btn-outline-primary btn-lg">
                    <i class="fas fa-user-plus me-2"></i>Đăng ký
                </a>
            </div>
        </div>
    </div>

    <div class="row g-4">
        <div class="col-md-4">
            <div class="card h-100">
                <div class="card-body text-center">
                    <i class="fas fa-lock fa-3x text-primary mb-3"></i>
                    <h5>Xác thực an toàn</h5>
                    <p>Trải nghiệm hệ thống xác thực bằng JWT với phân quyền vai trò.</p>
                </div>
            </div>
        </div>

        <div class="col-md-4">
            <div class="card h-100">
                <div class="card-body text-center">
                    <i class="fas fa-shield-alt fa-3x text-success mb-3"></i>
                    <h5>Đường dẫn được bảo vệ</h5>
                    <p>Kiểm soát truy cập theo vai trò và quyền hạn người dùng.</p>
                </div>
            </div>
        </div>

        <div class="col-md-4">
            <div class="card h-100">
                <div class="card-body text-center">
                    <i class="fas fa-mobile-alt fa-3x text-info mb-3"></i>
                    <h5>Thiết kế đáp ứng</h5>
                    <p>Hoạt động mượt mà trên mọi thiết bị và kích thước màn hình.</p>
                </div>
            </div>
        </div>
    </div>
}

<!-- Modal Giới Thiệu -->
<div class="modal fade" id="aboutModal" tabindex="-1" aria-labelledby="aboutModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header bg-primary text-white">
                <h5 class="modal-title" id="aboutModalLabel">Về hệ thống xác thực JWT</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Đóng"></button>
            </div>
            <div class="modal-body">
                <p>Đây là một hệ thống mô phỏng xác thực JWT trong ứng dụng ASP.NET Core MVC.</p>
                <h6 class="mt-4">Tính năng:</h6>
                <ul class="list-unstyled">
                    <li><i class="fas fa-check-circle text-success me-2"></i>Đăng ký & Đăng nhập người dùng</li>
                    <li><i class="fas fa-check-circle text-success me-2"></i>Xác thực dựa trên JWT</li>
                    <li><i class="fas fa-check-circle text-success me-2"></i>Phân quyền theo vai trò</li>
                    <li><i class="fas fa-check-circle text-success me-2"></i>Bảo vệ các API</li>
                    <li><i class="fas fa-check-circle text-success me-2"></i>Thiết kế đáp ứng</li>
                </ul>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Đóng</button>
            </div>
        </div>
    </div>
</div>


@section Styles {
    <style>
        .hero-section {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            padding: 4rem 0;
            margin-bottom: 3rem;
            border-radius: 0.5rem;
        }
        
        .card {
            transition: transform 0.2s, box-shadow 0.2s;
            border: none;
            border-radius: 0.5rem;
            overflow: hidden;
            box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);
            height: 100%;
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15);
        }
        
        .card-body {
            padding: 2rem 1.5rem;
        }
        
        .btn-lg {
            padding: 0.5rem 1.5rem;
            font-weight: 500;
        }
        
        .badge {
            font-size: 0.9rem;
            padding: 0.5rem 1rem;
            border-radius: 50rem;
        }
    </style>
}
